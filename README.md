# OFIQ C# Console Application (Linux)

Данный проект является реализацией консольного приложения на языке **C#** для операционной системы **Linux**, предназначенного для оценки качества изображений лиц с использованием библиотеки **OFIQ**.

Проект основан на официальном репозитории:  
[**https://github.com/BSI-OFIQ/OFIQ-Project/tree/main**](https://github.com/BSI-OFIQ/OFIQ-Project/tree/main)

## Основные возможности
- Полная интеграция с нативной библиотекой `libofiq_lib.so`.
- Реализация метода `vectorQuality`, аналогичного оригинальному `OFIQSampleApp`.
- Вывод детальной информации по всем метрикам качества (ISO/IEC 29794-5).
- Получение координат лица (`Bounding Box`).
- Кроссплатформенная работа с изображениями через `SixLabors.ImageSharp`.

## Структура проекта
- `ofiq_bridge.cpp` — C++ обертка (Wrapper) для обеспечения совместимости между C++ (std::shared_ptr, std::map) и C# (P/Invoke).
- `OFIQConsoleApp/` — Основной проект на .NET Core (C#).
- `setup.sh` — Скрипт для автоматической сборки моста, публикации приложения и настройки окружения.
- `libofiq_lib.so` & `libonnxruntime.so.1.18.1` — Скомпилированные библиотеки OFIQ (должны быть в корне проекта).

## Требования
- **ОС:** Linux (x64)
- **Инструменты:** 
  - GCC (g++)
  - .NET SDK (версия 8.0 или выше)

## Сборка и запуск

1. Сделайте скрипт сборки исполняемым и запустите его:
   ```bash
   chmod +x setup.sh
   ./setup.sh
   ```
   *Скрипт скомпилирует C++ мост, соберет C# проект и скопирует все библиотеки в папку `publish`.*

2. Перейдите в папку с собранным приложением:
   ```bash
   cd OFIQConsoleApp/bin/Release/net10.0/linux-x64/publish/
   ```

3. Запустите программу, указав путь к изображению и папке конфигурации:
   ```bash
   ./OFIQConsoleApp <путь_к_изображению> [путь_к_папке_config] [имя_файла_config]
   ```

## Пример вызова
```bash
./OFIQConsoleApp ./face.jpg /home/user/ofiq/config ofiq_config.jaxn
```

---
*Разработано на основе эталонной реализации алгоритмов оценки качества лиц (OFIQ) от Федерального ведомства по информационной безопасности Германии (BSI).*
