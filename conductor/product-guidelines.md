# Product Guidelines

Эти руководства определяют стандарты качества, стиля и технической реализации проекта IKAO-OFIQ.

## Техническая точность и соответствие стандартам
- **Верность ISO/IEC 29794-5:** Любая реализация должна строго соответствовать математическим моделям и порогам, определенным в стандарте.
- **Воспроизводимость:** Результаты обработки одного и того же изображения в C# обертке должны быть идентичны результатам нативной библиотеки OFIQ.

## Архитектурные принципы
- **Разделение слоев (Layering):** Четкое разделение между нативным кодом (Bridge), уровнем системных вызовов (NativeInvoke) и бизнес-логикой приложения.
- **Безопасность памяти:** Поскольку проект использует P/Invoke, особое внимание должно уделяться корректному освобождению неуправляемой памяти (`IntPtr`, `free_status`).

## Диагностика и отладка
- **Прозрачность ошибок:** Коды ошибок от нативной библиотеки должны транслироваться в понятные исключения или статусы на стороне C#.
- **Логирование:** Сообщения о результатах (Bounding Box, оценки качества) должны выводиться в структурированном виде, удобном для последующего анализа (например, в CSV).

## Производительность
- **Эффективность памяти:** Избегать лишнего копирования массивов пикселей между управляемой и неуправляемой памятью там, где это возможно.
- **Многопоточность:** Приложение должно быть готово к пакетной обработке (batch processing) изображений, эффективно используя ресурсы CPU.

## Стиль кода (C#)
- Следование стандартам именования .NET (PascalCase для методов и свойств).
- Обязательное использование `using` для ресурсов, реализующих `IDisposable` (например, изображения ImageSharp).
